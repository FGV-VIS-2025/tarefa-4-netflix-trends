import{s as zt,n as wt,o as Bt,r as Vt,b as me}from"../chunks/scheduler.e108d1fd.js";import{S as Rt,i as Ot,g as p,s as z,m as Q,y as R,h as b,j as g,z as De,c as B,n as W,f as u,A as O,k as l,B as Z,a as Je,x as a,D as Ye,o as Pe,E as kt}from"../chunks/index.82185d76.js";import{e as $e,c as Pt,b as Dt,m as et,l as Yt,s as tt,a as At,d as Tt}from"../chunks/transform.00e8467e.js";function It(e,r,s){const _=e.slice();return _[57]=r[s],_[59]=s,_}function Mt(e,r,s){const _=e.slice();return _[57]=r[s],_[59]=s,_}function St(e){let r,s,_,I,q,y,w;function F(...i){return e[34](e[59],...i)}function X(...i){return e[35](e[59],...i)}function x(...i){return e[36](e[59],...i)}return{c(){r=R("rect"),this.h()},l(i){r=O(i,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),g(r).forEach(u),this.h()},h(){l(r,"x",s=e[12](e[57].age_certification)),l(r,"y",_=e[11](e[57].count)),l(r,"width",I=e[12].bandwidth()),l(r,"height",q=e[8].bottom-e[11](e[57].count)),l(r,"fill","steelblue"),l(r,"class","svelte-16nqcr2"),Z(r,"selected",e[17].includes(e[57].age_certification)),Z(r,"filtered",e[18].length>0)},m(i,f){Je(i,r,f),y||(w=[Ye(r,"mouseenter",F),Ye(r,"mouseleave",X),Ye(r,"click",x)],y=!0)},p(i,f){e=i,f[0]&4112&&s!==(s=e[12](e[57].age_certification))&&l(r,"x",s),f[0]&2064&&_!==(_=e[11](e[57].count))&&l(r,"y",_),f[0]&4096&&I!==(I=e[12].bandwidth())&&l(r,"width",I),f[0]&2320&&q!==(q=e[8].bottom-e[11](e[57].count))&&l(r,"height",q),f[0]&131088&&Z(r,"selected",e[17].includes(e[57].age_certification)),f[0]&262144&&Z(r,"filtered",e[18].length>0)},d(i){i&&u(r),y=!1,Vt(w)}}}function Nt(e){let r,s,_,I,q,y,w;function F(...i){return e[41](e[59],...i)}function X(...i){return e[42](e[59],...i)}function x(...i){return e[43](e[59],...i)}return{c(){r=R("rect"),this.h()},l(i){r=O(i,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0,class:!0}),g(r).forEach(u),this.h()},h(){l(r,"x",s=e[10](e[57].release_year)),l(r,"y",_=e[9](e[57].count)),l(r,"width",I=e[10].bandwidth()),l(r,"height",q=e[8].bottom-e[9](e[57].count)),l(r,"fill","steelblue"),l(r,"class","svelte-16nqcr2"),Z(r,"selected",e[18].includes(e[57].release_year)),Z(r,"filtered",e[17].length>0)},m(i,f){Je(i,r,f),y||(w=[Ye(r,"mouseenter",F),Ye(r,"mouseleave",X),Ye(r,"click",x)],y=!0)},p(i,f){e=i,f[0]&1152&&s!==(s=e[10](e[57].release_year))&&l(r,"x",s),f[0]&640&&_!==(_=e[9](e[57].count))&&l(r,"y",_),f[0]&1024&&I!==(I=e[10].bandwidth())&&l(r,"width",I),f[0]&896&&q!==(q=e[8].bottom-e[9](e[57].count))&&l(r,"height",q),f[0]&262272&&Z(r,"selected",e[18].includes(e[57].release_year)),f[0]&131072&&Z(r,"filtered",e[17].length>0)},d(i){i&&u(r),y=!1,Vt(w)}}}function jt(e){let r,s,_,I="Movie Counts by Age Certification",q,y,w,F,X,x,i,f,$,ie,P,ee,j,A,pe,ce,C,H,M,fe,N,k,E,G="Classificação:",L,T=(e[22].age_certification||"")+"",be,Ae,d,Te="Número de filmes:",ye,le=(e[22].count||0)+"",Ce,Ie,S,U,Ke="Movie Counts by Release Year",je,ue,se,Ge,Me,Xe,te,V,re,Se,ae,Ne,ne,J,t,c,m,v,he,lt,oe,K,Ee,ft="Release Year:",st,He=(e[21].release_year||"")+"",Qe,rt,qe,ut="Number of Movies:",at,Le=(e[21].count||0)+"",We,Ze,we,_e,ht="Reset All Filters",nt,_t,Ve=$e(e[4]),D=[];for(let n=0;n<Ve.length;n+=1)D[n]=St(Mt(e,Ve,n));let ze=$e(e[7]),Y=[];for(let n=0;n<ze.length;n+=1)Y[n]=Nt(It(e,ze,n));return{c(){r=p("div"),s=p("div"),_=p("h2"),_.textContent=I,q=z(),y=p("div"),w=p("span"),F=Q("Total Movies: "),X=Q(e[19]),x=z(),i=p("div"),f=R("svg"),$=R("g"),P=R("g"),j=R("g");for(let n=0;n<D.length;n+=1)D[n].c();A=R("text"),pe=Q("Classificação etária"),C=R("text"),H=Q("Contagedm de filmes"),fe=z(),N=p("div"),k=p("div"),E=p("strong"),E.textContent=G,L=z(),be=Q(T),Ae=z(),d=p("strong"),d.textContent=Te,ye=z(),Ce=Q(le),Ie=z(),S=p("div"),U=p("h2"),U.textContent=Ke,je=z(),ue=p("div"),se=p("span"),Ge=Q("Total Movies: "),Me=Q(e[20]),Xe=z(),te=p("div"),V=R("svg"),re=R("g"),ae=R("g"),ne=R("g");for(let n=0;n<Y.length;n+=1)Y[n].c();J=R("text"),t=Q("Release Year"),m=R("text"),v=Q("Number of Movies"),lt=z(),oe=p("div"),K=p("div"),Ee=p("strong"),Ee.textContent=ft,st=z(),Qe=Q(He),rt=z(),qe=p("strong"),qe.textContent=ut,at=z(),We=Q(Le),Ze=z(),we=p("div"),_e=p("button"),_e.textContent=ht,this.h()},l(n){r=b(n,"DIV",{class:!0});var h=g(r);s=b(h,"DIV",{class:!0});var o=g(s);_=b(o,"H2",{class:!0,"data-svelte-h":!0}),De(_)!=="svelte-1ijdd6"&&(_.textContent=I),q=B(o),y=b(o,"DIV",{class:!0});var ge=g(y);w=b(ge,"SPAN",{class:!0});var ot=g(w);F=W(ot,"Total Movies: "),X=W(ot,e[19]),ot.forEach(u),ge.forEach(u),x=B(o),i=b(o,"DIV",{class:!0});var Fe=g(i);f=O(Fe,"svg",{viewBox:!0,class:!0});var Be=g(f);$=O(Be,"g",{transform:!0}),g($).forEach(u),P=O(Be,"g",{transform:!0}),g(P).forEach(u),j=O(Be,"g",{class:!0});var gt=g(j);for(let ke=0;ke<D.length;ke+=1)D[ke].l(gt);gt.forEach(u),A=O(Be,"text",{x:!0,y:!0,"text-anchor":!0,"font-size":!0});var dt=g(A);pe=W(dt,"Classificação etária"),dt.forEach(u),C=O(Be,"text",{x:!0,y:!0,"text-anchor":!0,"font-size":!0,transform:!0});var vt=g(C);H=W(vt,"Contagedm de filmes"),vt.forEach(u),Be.forEach(u),fe=B(Fe),N=b(Fe,"DIV",{class:!0});var mt=g(N);k=b(mt,"DIV",{class:!0});var de=g(k);E=b(de,"STRONG",{class:!0,"data-svelte-h":!0}),De(E)!=="svelte-xchett"&&(E.textContent=G),L=B(de),be=W(de,T),Ae=B(de),d=b(de,"STRONG",{class:!0,"data-svelte-h":!0}),De(d)!=="svelte-1l9i0ay"&&(d.textContent=Te),ye=B(de),Ce=W(de,le),de.forEach(u),mt.forEach(u),Fe.forEach(u),o.forEach(u),Ie=B(h),S=b(h,"DIV",{class:!0});var Re=g(S);U=b(Re,"H2",{class:!0,"data-svelte-h":!0}),De(U)!=="svelte-1iuv0on"&&(U.textContent=Ke),je=B(Re),ue=b(Re,"DIV",{class:!0});var pt=g(ue);se=b(pt,"SPAN",{class:!0});var it=g(se);Ge=W(it,"Total Movies: "),Me=W(it,e[20]),it.forEach(u),pt.forEach(u),Xe=B(Re),te=b(Re,"DIV",{class:!0});var xe=g(te);V=O(xe,"svg",{viewBox:!0,class:!0});var Oe=g(V);re=O(Oe,"g",{transform:!0}),g(re).forEach(u),ae=O(Oe,"g",{transform:!0}),g(ae).forEach(u),ne=O(Oe,"g",{class:!0});var bt=g(ne);for(let ke=0;ke<Y.length;ke+=1)Y[ke].l(bt);bt.forEach(u),J=O(Oe,"text",{x:!0,y:!0,"text-anchor":!0,"font-size":!0});var yt=g(J);t=W(yt,"Release Year"),yt.forEach(u),m=O(Oe,"text",{x:!0,y:!0,"text-anchor":!0,"font-size":!0,transform:!0});var Ct=g(m);v=W(Ct,"Number of Movies"),Ct.forEach(u),Oe.forEach(u),lt=B(xe),oe=b(xe,"DIV",{class:!0});var Et=g(oe);K=b(Et,"DIV",{class:!0});var ve=g(K);Ee=b(ve,"STRONG",{class:!0,"data-svelte-h":!0}),De(Ee)!=="svelte-1be8oh6"&&(Ee.textContent=ft),st=B(ve),Qe=W(ve,He),rt=B(ve),qe=b(ve,"STRONG",{class:!0,"data-svelte-h":!0}),De(qe)!=="svelte-95ipcb"&&(qe.textContent=ut),at=B(ve),We=W(ve,Le),ve.forEach(u),Et.forEach(u),xe.forEach(u),Re.forEach(u),h.forEach(u),Ze=B(n),we=b(n,"DIV",{class:!0});var qt=g(we);_e=b(qt,"BUTTON",{class:!0,"data-svelte-h":!0}),De(_e)!=="svelte-14u66h2"&&(_e.textContent=ht),qt.forEach(u),this.h()},h(){l(_,"class","svelte-16nqcr2"),l(w,"class","total-counter svelte-16nqcr2"),l(y,"class","chart-info svelte-16nqcr2"),l($,"transform",ie="translate(0, "+e[8].bottom+")"),l(P,"transform",ee="translate("+e[8].left+", 0)"),l(j,"class","bars"),l(A,"x",ce=(e[8].left+e[8].right)/2),l(A,"y",Ue-10),l(A,"text-anchor","middle"),l(A,"font-size","12"),l(C,"x",M=-e[8].top-e[8].height/2),l(C,"y",15),l(C,"text-anchor","middle"),l(C,"font-size","12"),l(C,"transform","rotate(-90)"),l(f,"viewBox",`0 0 ${ct} ${Ue}`),l(f,"class","svelte-16nqcr2"),l(E,"class","svelte-16nqcr2"),l(d,"class","svelte-16nqcr2"),l(k,"class","tooltip-content svelte-16nqcr2"),l(N,"class","fixed-tooltip svelte-16nqcr2"),Z(N,"hidden",e[5]===-1),l(i,"class","chart-container svelte-16nqcr2"),l(s,"class","chart svelte-16nqcr2"),l(U,"class","svelte-16nqcr2"),l(se,"class","total-counter svelte-16nqcr2"),l(ue,"class","chart-info svelte-16nqcr2"),l(re,"transform",Se="translate(0, "+e[8].bottom+")"),l(ae,"transform",Ne="translate("+e[8].left+", 0)"),l(ne,"class","bars"),l(J,"x",c=(e[8].left+e[8].right)/2),l(J,"y",Ue-10),l(J,"text-anchor","middle"),l(J,"font-size","12"),l(m,"x",he=-e[8].top-e[8].height/2),l(m,"y",15),l(m,"text-anchor","middle"),l(m,"font-size","12"),l(m,"transform","rotate(-90)"),l(V,"viewBox",`0 0 ${ct} ${Ue}`),l(V,"class","svelte-16nqcr2"),l(Ee,"class","svelte-16nqcr2"),l(qe,"class","svelte-16nqcr2"),l(K,"class","tooltip-content svelte-16nqcr2"),l(oe,"class","fixed-tooltip svelte-16nqcr2"),Z(oe,"hidden",e[6]===-1),l(te,"class","chart-container svelte-16nqcr2"),l(S,"class","chart svelte-16nqcr2"),l(r,"class","content svelte-16nqcr2"),l(_e,"class","reset-button svelte-16nqcr2"),l(we,"class","chart-controls")},m(n,h){Je(n,r,h),a(r,s),a(s,_),a(s,q),a(s,y),a(y,w),a(w,F),a(w,X),a(s,x),a(s,i),a(i,f),a(f,$),e[32]($),a(f,P),e[33](P),a(f,j);for(let o=0;o<D.length;o+=1)D[o]&&D[o].m(j,null);a(f,A),a(A,pe),a(f,C),a(C,H),e[37](f),a(i,fe),a(i,N),a(N,k),a(k,E),a(k,L),a(k,be),a(k,Ae),a(k,d),a(k,ye),a(k,Ce),e[38](N),a(r,Ie),a(r,S),a(S,U),a(S,je),a(S,ue),a(ue,se),a(se,Ge),a(se,Me),a(S,Xe),a(S,te),a(te,V),a(V,re),e[39](re),a(V,ae),e[40](ae),a(V,ne);for(let o=0;o<Y.length;o+=1)Y[o]&&Y[o].m(ne,null);a(V,J),a(J,t),a(V,m),a(m,v),e[44](V),a(te,lt),a(te,oe),a(oe,K),a(K,Ee),a(K,st),a(K,Qe),a(K,rt),a(K,qe),a(K,at),a(K,We),e[45](oe),Je(n,Ze,h),Je(n,we,h),a(we,_e),nt||(_t=Ye(_e,"click",e[46]),nt=!0)},p(n,h){if(h[0]&524288&&Pe(X,n[19]),h[0]&256&&ie!==(ie="translate(0, "+n[8].bottom+")")&&l($,"transform",ie),h[0]&256&&ee!==(ee="translate("+n[8].left+", 0)")&&l(P,"transform",ee),h[0]&17176848){Ve=$e(n[4]);let o;for(o=0;o<Ve.length;o+=1){const ge=Mt(n,Ve,o);D[o]?D[o].p(ge,h):(D[o]=St(ge),D[o].c(),D[o].m(j,null))}for(;o<D.length;o+=1)D[o].d(1);D.length=Ve.length}if(h[0]&256&&ce!==(ce=(n[8].left+n[8].right)/2)&&l(A,"x",ce),h[0]&256&&M!==(M=-n[8].top-n[8].height/2)&&l(C,"x",M),h[0]&4194304&&T!==(T=(n[22].age_certification||"")+"")&&Pe(be,T),h[0]&4194304&&le!==(le=(n[22].count||0)+"")&&Pe(Ce,le),h[0]&32&&Z(N,"hidden",n[5]===-1),h[0]&1048576&&Pe(Me,n[20]),h[0]&256&&Se!==(Se="translate(0, "+n[8].bottom+")")&&l(re,"transform",Se),h[0]&256&&Ne!==(Ne="translate("+n[8].left+", 0)")&&l(ae,"transform",Ne),h[0]&33949568){ze=$e(n[7]);let o;for(o=0;o<ze.length;o+=1){const ge=It(n,ze,o);Y[o]?Y[o].p(ge,h):(Y[o]=Nt(ge),Y[o].c(),Y[o].m(ne,null))}for(;o<Y.length;o+=1)Y[o].d(1);Y.length=ze.length}h[0]&256&&c!==(c=(n[8].left+n[8].right)/2)&&l(J,"x",c),h[0]&256&&he!==(he=-n[8].top-n[8].height/2)&&l(m,"x",he),h[0]&2097152&&He!==(He=(n[21].release_year||"")+"")&&Pe(Qe,He),h[0]&2097152&&Le!==(Le=(n[21].count||0)+"")&&Pe(We,Le),h[0]&64&&Z(oe,"hidden",n[6]===-1)},i:wt,o:wt,d(n){n&&(u(r),u(Ze),u(we)),e[32](null),e[33](null),kt(D,n),e[37](null),e[38](null),e[39](null),e[40](null),kt(Y,n),e[44](null),e[45](null),nt=!1,_t()}}}let ct=800,Ue=500;function Gt(e,r,s){let _,I,q,y,w,F,X,x,i,f,$,ie,P,ee,j,A,pe,ce,C=[],H=[],M=[],fe=-1,N=-1,k={top:20,right:30,bottom:50,left:50},E=[],G=[],L=[],T=[],be=0,Ae=0,d={top:k.top,right:ct-k.right,bottom:Ue-k.bottom,left:k.left};d.width=d.right-d.left,d.height=d.bottom-d.top,Bt(async()=>{C=await Pt("/data/titles.csv",t=>({title:t.title,age_certification:t.age_certification,release_year:t.release_year})),console.log(C),Te()});function Te(){ye(),le(),s(4,M=[...H]),s(7,T=[...L]),Ce()}function ye(t=null){const c={};(t?C.filter(v=>t.includes(v.release_year)):C).forEach(v=>{v.age_certification&&(c[v.age_certification]=(c[v.age_certification]||0)+1)}),s(26,H=Object.entries(c).map(([v,he])=>({age_certification:v,count:Number(he)}))),t||s(4,M=[...H])}function le(t=null){const c={};(t?C.filter(v=>t.includes(v.age_certification)):C).forEach(v=>{v.release_year&&(c[v.release_year]=(c[v.release_year]||0)+1)}),s(27,L=Object.entries(c).map(([v,he])=>({release_year:v,count:Number(he)}))),t||s(7,T=[...L])}function Ce(){s(19,be=M.reduce((t,c)=>t+c.count,0)),s(20,Ae=T.reduce((t,c)=>t+c.count,0))}function Ie(){G.length>0?(ye(G),s(4,M=[...H])):(ye(),s(4,M=[...H])),E.length>0?(le(E),s(7,T=[...L])):(le(),s(7,T=[...L])),Ce()}function S(t,c){if(c.type==="mouseenter")s(5,fe=t);else if(c.type==="mouseleave")s(5,fe=-1);else if(c.type==="click"){let m=M[t].age_certification;E.includes(m)?s(17,E=E.filter(v=>v!==m)):s(17,E=[...E,m]),console.log("clicked ages:",E),Ie()}}function U(t,c){if(c.type==="mouseenter")s(6,N=t);else if(c.type==="mouseleave")s(6,N=-1);else if(c.type==="click"){let m=T[t].release_year;G.includes(m)?s(18,G=G.filter(v=>v!==m)):s(18,G=[...G,m]),console.log("clicked years:",G),Ie()}}function Ke(t){me[t?"unshift":"push"](()=>{P=t,s(0,P)})}function je(t){me[t?"unshift":"push"](()=>{ee=t,s(1,ee)})}const ue=(t,c)=>S(t,c),se=(t,c)=>S(t,c),Ge=(t,c)=>S(t,c);function Me(t){me[t?"unshift":"push"](()=>{$=t,s(13,$)})}function Xe(t){me[t?"unshift":"push"](()=>{pe=t,s(15,pe)})}function te(t){me[t?"unshift":"push"](()=>{j=t,s(2,j)})}function V(t){me[t?"unshift":"push"](()=>{A=t,s(3,A)})}const re=(t,c)=>U(t,c),Se=(t,c)=>U(t,c),ae=(t,c)=>U(t,c);function Ne(t){me[t?"unshift":"push"](()=>{ie=t,s(14,ie)})}function ne(t){me[t?"unshift":"push"](()=>{ce=t,s(16,ce)})}const J=()=>{s(17,E=[]),s(18,G=[]),Te()};return e.$$.update=()=>{e.$$.dirty[0]&48&&s(22,_=M[fe]||{}),e.$$.dirty[0]&192&&s(21,I=T[N]||{}),e.$$.dirty[0]&67108864&&s(31,q=[...new Set(H.map(t=>t.age_certification))]),e.$$.dirty[0]&134217728&&s(30,y=[...new Set(L.map(t=>t.release_year))]),e.$$.dirty[0]&16&&[...new Set(M.map(t=>t.age_certification))],e.$$.dirty[0]&128&&[...new Set(T.map(t=>t.release_year))],e.$$.dirty[0]&256|e.$$.dirty[1]&1&&s(12,w=Dt().domain(q).range([d.left,d.right]).padding(.1)),e.$$.dirty[0]&1073742080&&s(10,F=Dt().domain(y).range([d.left,d.right]).padding(.1)),e.$$.dirty[0]&67108880&&s(29,X=Math.max(et(H.map(t=>t.count))||0,et(M.map(t=>t.count))||0)),e.$$.dirty[0]&536871168&&s(11,x=Yt().domain([0,X]).range([d.bottom,d.top])),e.$$.dirty[0]&134217856&&s(28,i=Math.max(et(L.map(t=>t.count))||0,et(T.map(t=>t.count))||0)),e.$$.dirty[0]&268435712&&s(9,f=Yt().domain([0,i]).range([d.bottom,d.top])),e.$$.dirty[0]&7695&&(P&&tt(P).call(At(w)),ee&&tt(ee).call(Tt(x)),j&&tt(j).call(At(F)),A&&tt(A).call(Tt(f)))},[P,ee,j,A,M,fe,N,T,d,f,F,x,w,$,ie,pe,ce,E,G,be,Ae,I,_,Te,S,U,H,L,i,X,y,q,Ke,je,ue,se,Ge,Me,Xe,te,V,re,Se,ae,Ne,ne,J]}class Ut extends Rt{constructor(r){super(),Ot(this,r,Gt,jt,zt,{},null,[-1,-1])}}export{Ut as component};
